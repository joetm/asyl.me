define(["tpl","leaflet","map","config","helpers","happiness","minmax"],function(n,i,o,t,e,d,a){"use strict";n.info_panel.onAdd=function(n){var o=i.DomUtil.create("div","info panel");return o.innerHTML="Choose your origin",o},n.info_panel.addTo(o),n.info_detail.onAdd=function(o){var t=i.DomUtil.create("div","info detail");return i.DomUtil.addClass(t,"hidden"),i.DomUtil.addClass(t,"pull-right"),i.DomUtil.addClass(t,"bottomright"),t.innerHTML=n.info_detailTpl({name:"Country"}),t},n.info_detail.addTo(o),$(".info.debug").parent("div").addClass("debug"),$.when(a).done(function(n){var d=i.control({position:"bottomright"});d.onAdd=function(o){var d=i.DomUtil.create("div","info legend"),a=Array.apply(null,Array(parseInt(n.max+1,10))).map(function(n,i){return i});d.innerHTML+='<div><i style="background:'+t.defaultStyle.fillColor+'"></i> ?</div>';for(var l=parseInt(n.min,10)+1,r=l;r<a.length;r++)d.innerHTML+='<div><i style="background:'+e.getLegendColor(a[r-l]+1)+'"></i> '+a[r]+(a[r+1]?"&ndash;"+a[r+1]:"+")+"</div>";return i.DomUtil.addClass(d,"pull-right"),i.DomUtil.addClass(d,"bottomright"),d},d.addTo(o)})});